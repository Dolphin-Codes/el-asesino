<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assesino</title>
    <style>
        body {
            background-color: black;
            color: #00ff00;
            font-family: "Courier New", Courier, monospace;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        #container {
            background-color: #111;
            border: 2px solid #00ff00;
            padding: 20px;
            width: 90%;
            max-width: 600px;
            height: 70%;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
        }
        #messages {
            white-space: pre-wrap;
            overflow-wrap: break-word;
            flex-grow: 1;
            margin-bottom: 10px;
            font-size: 18px;
        }
        #input-container {
            display: none;
            margin-top: 10px;
        }
        input {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            background-color: black;
            color: #00ff00;
            border: 1px solid #00ff00;
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="messages">Initializing...</div>
        <div id="input-container">
            <input type="text" id="user-input" placeholder="Type your answer..." autofocus />
        </div>
    </div>
    <!-- Free beep sound hosted online -->
    <audio id="beep-sound" src="https://www.soundjay.com/button/beep-07.wav"></audio>
    <script>
        const messages = [
            { text: "Did you find it?", expected: "El asesino?" },
            { text: "Yes", expected: "Maybe. Is it Hana?" },
            { text: "I see", expected: null },
            { text: "You don't see the bigger picture", expected: null },
            { text: "Maybe this will help", expected: null },
            { text: "Iâ€™m young but ahead of my years My mind is sharp, my ideas flow wild, they call me unique what am I?", expected: "A gifted child?" },
            { text: "Goodbye.", expected: null }
        ];
        let currentMessageIndex = -1;

        const messageContainer = document.getElementById("messages");
        const inputContainer = document.getElementById("input-container");
        const userInput = document.getElementById("user-input");
        const beepSound = document.getElementById("beep-sound");

        function playBeep() {
            beepSound.currentTime = 0; // Reset audio to start
            beepSound.play().catch(() => {
                console.log("Beep sound couldn't play due to browser restrictions.");
            });
        }

        function displayMessage(message) {
            playBeep(); // Play beep sound
            let index = 0;
            const interval = setInterval(() => {
                messageContainer.innerText += message[index];
                messageContainer.scrollTop = messageContainer.scrollHeight;
                index++;
                if (index === message.length) {
                    clearInterval(interval);
                }
            }, 100); // Speed of typing effect
        }

        function submitInput(event) {
            if (event.key === "Enter") { // User presses Enter
                const userAnswer = userInput.value.trim();
                if (currentMessageIndex >= 0 && messages[currentMessageIndex].expected) {
                    displayMessage(`You: ${userAnswer}`); // Show user input
                    playBeep(); // Beep for user input
                    if (userAnswer !== messages[currentMessageIndex].expected) {
                        displayMessage("Incorrect. Try again.");
                        userInput.value = ""; // Clear input field
                        return;
                    }
                }

                userInput.value = ""; // Clear input
                nextMessage();
            }
        }

        function nextMessage() {
            currentMessageIndex++;
            if (currentMessageIndex >= messages.length) {
                inputContainer.style.display = "none";
                return;
            }

            const currentMessage = messages[currentMessageIndex];
            setTimeout(() => {
                displayMessage(currentMessage.text);
                if (currentMessage.expected) {
                    inputContainer.style.display = "block";
                    userInput.focus();
                } else {
                    nextMessage(); // Automatically go to the next message
                }
            }, 3000); // 3 seconds delay
        }

        function displayHackerCode() {
            let hackerLines = [
                "Connecting to server...",
                "Accessing database...",
                "Decrypting keys...",
                "Running simulation...",
                "System breach detected!"
            ];
            let index = 0;
            let hackerInterval = setInterval(() => {
                if (index >= hackerLines.length) {
                    clearInterval(hackerInterval);
                    messageContainer.innerText = ""; // Clear the "hacker code"
                    nextMessage(); // Start the conversation
                } else {
                    messageContainer.innerText += `\n${hackerLines[index]}`;
                    messageContainer.scrollTop = messageContainer.scrollHeight;
                    index++;
                }
            }, 500); // Show a line every 0.5 seconds
        }

        // Start the hacker code simulation on load
        window.onload = () => {
            displayHackerCode();
            userInput.addEventListener("keydown", submitInput);
        };
    </script>
</body>
</html>
